{"version":3,"file":"index.B0Hcdfle.js","sources":["../../src/components/HelloWorld.vue","../../src/web/index.vue"],"sourcesContent":["<template>\n  <Flex vertical gap=\"middle\">\n    <Bubble.List\n      :roles=\"roles\"\n      :style=\"{ maxHeight: 300 }\"\n      :items=\"\n        messages.map(({ id, message, status }) => ({\n          key: id,\n          role: status === 'local' ? 'local' : 'ai',\n          content: message,\n        }))\n      \"\n    />\n    <Sender\n      :loading=\"senderLoading\"\n      :value=\"content\"\n      :onChange=\"(v) => (content = v)\"\n      :onSubmit=\"\n        (nextContent) => {\n          onRequest(nextContent);\n          content = '';\n        }\n      \"\n    />\n  </Flex>\n</template>\n\n<script setup lang=\"tsx\">\nimport { UserOutlined } from \"@ant-design/icons-vue\";\nimport { Flex } from \"ant-design-vue\";\nimport { Bubble, Sender, useXAgent, useXChat } from \"ant-design-x-vue\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\ndefineOptions({ name: \"AXUseXChatStream\" });\n\nconst roles: typeof Bubble.List[\"roles\"] = {\n  ai: {\n    placement: \"start\",\n    avatar: { icon: <UserOutlined />, style: { background: \"#fde3cf\" } },\n  },\n  local: {\n    placement: \"end\",\n    avatar: { icon: <UserOutlined />, style: { background: \"#87d068\" } },\n  },\n};\n\nconst content = ref(\"\");\nconst senderLoading = ref(false);\n\n// Agent for request\nconst [agent] = useXAgent({\n  request: async ({ message }, { onSuccess, onUpdate }) => {\n    senderLoading.value = true;\n    axios\n      .post(\n        \"http://192.168.79.122:8083/v1/chat-messages\",\n        {\n          query: message,\n          user: \"ldq\",\n          response_mode: \"streaming\",\n          inputs: {\"user_token\":\"bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJsb2dpblR5cGUiOiJsb2dpbiIsImxvZ2luSWQiOiI2NzAzMDY4Njk4MzA0ODUyNTMiLCJyblN0ciI6InJtdUhyeHdaTlFDZ2FkeUJrWE5QekxNNGwzbXBwclpkIiwidXNlcl9pZCI6IjY3MDMwNjg2OTgzMDQ4NTI1MyIsInVzZXJfbmFtZSI6ImxpdWRlcWkiLCJzaW5nbGVMb2dpbiI6MiwiZXhwIjoxNzQzNDU0ODE2Nzg5LCJ0b2tlbiI6ImxvZ2luX3Rva2VuXzY2MDUzOTA0Mjk4NDAwNSJ9.0bfDkDIkJjpp0zuIzJNzRKBBCdQD1hCphXOcpYzlMhI\"},\n        },\n        { headers: { Authorization: \"Bearer app-NnQlkYp2Wb9AQ05zvQPjGcWn\" } }\n      )\n      .then((res) => {\n        senderLoading.value = false;\n        console.log(res);\n      });\n  },\n});\n\n// Chat messages\nconst { onRequest, messages } = useXChat({\n  agent: agent.value,\n});\n\n</script>\n","<script setup lang=\"ts\">\r\nimport axios from 'axios';\r\nimport HelloWorld from '../components/HelloWorld.vue'\r\nvar header = {\r\n  'Authorization': 'Bearer app-NnQlkYp2Wb9AQ05zvQPjGcWn'\r\n}\r\nfunction startToDify(){\r\n  axios.post('http://192.168.79.122:8083/v1/chat-messages',{\r\n    query:\"帮我查询一下金钟这个客户的信息\",\r\n    user:\"ldq\",\r\n     \"response_mode\": \"streaming\",\r\n     \"inputs\": {},\r\n  },{headers:{'Authorization': 'Bearer app-NnQlkYp2Wb9AQ05zvQPjGcWn'}})\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <button class=\"button\" @click=\"startToDify\">Dify</button>\r\n    <div class=\"chatBox\">\r\n      <HelloWorld></HelloWorld>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n  .button {\r\n    background-color: red;\r\n    color:#fff;\r\n    font-size:26px;\r\n    font-weight:600;\r\n  }\r\n  .chatBox {\r\n    position:absolute;\r\n    bottom:40px;\r\n    left:50%;\r\n    transform:translate(-50%);\r\n    width:80%;\r\n\r\n  }\r\n  :deep(.ant-bubble-list) {\r\n    height:700px;\r\n    overflow-y: scroll;\r\n  }\r\n</style> "],"names":["roles","ai","placement","avatar","icon","_createVNode2","UserOutlined","style","background","local","content","ref","senderLoading","agent","useXAgent","request","message","onSuccess","onUpdate","value","axios","post","query","user","response_mode","inputs","headers","Authorization","then","res","console","log","onRequest","messages","useXChat","startToDify"],"mappings":"0PAmCA,MAAMA,EAAqC,CACzCC,GAAI,CACFC,UAAW,QACXC,OAAQ,CAAEC,KAAIC,EAAAC,EAAkB,KAAA,IAAA,EAAEC,MAAO,CAAEC,WAAY,SAAU,CAAE,CACpE,EACDC,MAAO,CACLP,UAAW,MACXC,OAAQ,CAAEC,KAAIC,EAAAC,EAAkB,KAAA,IAAA,EAAEC,MAAO,CAAEC,WAAY,SAAU,CAAE,CACrE,CACD,EAEKE,EAAUC,EAAI,EAAE,EAChBC,EAAgBD,EAAI,EAAK,EAGzB,CAACE,CAAK,EAAIC,EAAU,CACxBC,QAAS,MAAO,CAAEC,QAAAA,CAAQ,EAAG,CAAEC,UAAAA,EAAWC,SAAAA,CAAS,IAAM,CACvDN,EAAcO,MAAQ,GACtBC,EACGC,KACC,8CACA,CACEC,MAAON,EACPO,KAAM,MACNC,cAAe,YACfC,OAAQ,CAAC,WAAa,kYAAkY,CAC1Z,EACA,CAAEC,QAAS,CAAEC,cAAe,qCAAsC,CAAE,CACtE,EACCC,KAAMC,GAAQ,CACbjB,EAAcO,MAAQ,GACtBW,QAAQC,IAAIF,CAAG,CACjB,CAAC,CACL,CACF,CAAC,EAGK,CAAEG,UAAAA,EAAWC,SAAAA,CAAU,EAAGC,EAAS,CACvCrB,MAAOA,EAAMM,KACf,CAAC,gbCpED,SAASgB,GAAa,CACpBf,EAAM,KAAK,8CAA8C,CACvD,MAAM,kBACN,KAAK,MACJ,cAAiB,YACjB,OAAU,CAAA,GACX,CAAC,QAAQ,CAAC,cAAiB,uCAAuC,CAAA"}